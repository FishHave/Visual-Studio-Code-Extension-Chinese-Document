# 自定义编辑器

自定义编辑器允许扩展创建可自定义替代VS Code标准文本编辑器读写编辑器，它们为特定资源类型服务。它们有广泛的使用情形，比如：

- 直接在VS Code中预览资产，如着色器或3D模型
- 为如CSV或JSON或XML之类的语言创建所见即所得编辑器
- 为如CSV或JSON或XML之类的数据文件提供可视化渲染的替代品
- 为二进制或文本文件构建完全可自定义的编辑体验

这篇文档提供关于自定义编辑器API和实现自定义编辑器基础的概览。我们将关注两种自定义编辑器和它们的不同之处，以及您的需求适合哪个。然后对于每种自定义编辑器类型，我们会介绍构建良好自定义编辑器的基础

尽管自定义编辑器是一个强大的新扩展点，实现一个基础自定义编辑器实际上并不是那么难！如果您仍然在编辑您的第一个VS Code扩展，在您更熟悉VS Code API基础前，您也许要考虑推迟深入探究自定义编辑器。自定义编辑器以许多VS Code概念为基础——比如[Web视图](7.%20Web视图.md)和文本文档——所以如果您在同时学习这些新点子，它可能有些令人不知所措

但是如果您觉得准备好了并且在想关于您要构建的所有酷炫的自定义编辑器，那么让我们开始吧！确保下载[自定义编辑器扩展示例](https://github.com/microsoft/vscode-extension-samples/tree/main/custom-editor-sample)，这样您可以跟随文档并看看自定义编辑器API如何工作

## 链接

- [自定义编辑器示例](https://github.com/microsoft/vscode-extension-samples/tree/main/custom-editor-sample)

### VS Code API用法

- [`window.registerCustomEditorProvider`](/9.%20参考/1.%20VS%20Code%20API.md#window)
- [`CustomTextEditorProvider`](/9.%20参考/1.%20VS%20Code%20API.md#CustomTextEditorProvider)

## 自定义编辑器API基础

自定义编辑器是在VS Code标准文本编辑器中显示的视图替代，它用于特定资源。自定义编辑器有两部分：用户互动的视图和扩展用来与底层互动的文档模型

自定义编辑器的视图部分使用[Web视图](7.%20Web视图.md)实现。这允许您用标准HTML、CSS和JavaScript构建自定义编辑器的用户界面。Web视图不能直接访问VS Code API但是可以通过来回传递消息与扩展对话。查阅我们的[Web视图文档](7.%20Web视图.md)以了解更多Web视图信息和实践

自定义编辑器的另一部分是文档模型。这个模型是您的扩展如何理解处理的资源（文件）。`CustomTextEditorProvider`使用VS Code标准[TextDocument](/9.%20参考/1.%20VS%20Code%20API.md#workspace)作为它的文档模型，并且所有的文件更改使用VS Code标准文本编辑API表达。另一方面，`CustomReadonlyEditorProvider`和`CustomEditorProvider`允许您提供您自己的非文本文件格式文档模型

自定义编辑器对于每个资源拥有简单的文档模型，但是也许会存在多个文档编辑器实例（视图）。例如，假如您打开一个拥有`CustomTextEditorProvider`的文件，然后运行**View: Split editor（查看：拆分编辑器）**命令。这种情况下，仍然只有单个`TextDocument`，因为仍然只有单个工作空间资源的复制，但是现在有两个对于那个资源的Web视图